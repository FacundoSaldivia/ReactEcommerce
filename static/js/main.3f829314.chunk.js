(this.webpackJsonpfetchtest=this.webpackJsonpfetchtest||[]).push([[0],{121:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),r=a(9),i=a.n(r),o=a(42),s=a.n(o),l=a(65),d=a(13),u=a(161),j=a(71),p=a(154),b=a(156),m=a(157),h=a(74),g=a(158),x=a(159),O=a(36),f=a.n(O),C=a(160),S=a(151),k=Object(S.a)((function(){return{root:{maxWidth:"100%"},media:{height:0,paddingTop:"56.25%"},cardActions:{display:"flex",justifyContent:"flex-end"},cardContent:{display:"flex",justifyContent:"space-between",animation:"0.2s"},outStock:{color:"gray"}}})),v=a(2);var y=function(t){var e=t.product,a=t.setCart,c=t.cart,r=t.setCartStock,i=Object(n.useState)(!1),o=Object(d.a)(i,2),s=(o[0],o[1]),l=k();return Object(v.jsxs)(p.a,{className:l.root,onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!0)},children:[Object(v.jsx)(b.a,{className:l.media,image:e.imageUrl,title:e.title}),Object(v.jsxs)(m.a,{children:[Object(v.jsxs)("div",{className:l.CardContent,children:[Object(v.jsx)(h.a,{variant:"h5",gutterBottom:!0,children:e.title}),Object(v.jsx)(h.a,{variant:"h6",children:"$".concat(e.price)})]}),Object(v.jsx)(h.a,{className:l.description,variant:"body2",color:"textSecondary",children:e.description})]}),Object(v.jsx)(g.a,{disableSpacing:!0,className:l.CardActions,children:e.stock?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(x.a,{onClick:function(){return function(){var t=!1,n=1;c.forEach((function(a){console.log(e,a),n+=a.inCartStock,a._id===e._id?t=!0:t||(t=!1)})),t?(e.inCartStock++,e.stock--):(a((function(t){return[].concat(Object(j.a)(t),[e])})),e.inCartStock++,e.stock--),r(n)}()},"aria-label":"Add to cart",children:Object(v.jsx)(C.a,{})}),Object(v.jsxs)(h.a,{variant:"body2",children:["stock:",e.stock]})]}):Object(v.jsx)(x.a,{"aria-label":"Add to cart",children:Object(v.jsx)(h.a,{variant:"body2",children:"Sin stock"})})})]})},w=Object(S.a)((function(t){return{toolbar:t.mixins.toolbar,content:{paddingTop:"100px",flexGrow:1,backgroundColor:t.palette.background.default,padding:t.spacing(4)},root:{flexGrow:1}}})),N=function(t){var e=t.products,a=t.cart,n=t.setCart,c=t.setCartStock,r=w();return Object(v.jsx)("main",{className:r.content,children:Object(v.jsx)(u.a,{className:r.toolbar,container:!0,justify:"center",spacing:8,children:e.map((function(t){return Object(v.jsx)(u.a,{item:!0,xs:12,sm:6,m:4,lg:4,children:Object(v.jsx)(y,{product:t,setCart:n,cart:a,setCartStock:c})},t._id)}))})})},T=a(162),A=a(163),R=a(164),I=a(165),E=a(23),P=a(15),L=Object(S.a)((function(t){return{appBar:Object(E.a)({boxShadow:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},t.breakpoints.up("sm"),{width:"calc(100% - ".concat(0,"px)"),marginLeft:0}),title:{flexGrow:1,alignItems:"center",display:"flex",textDecoration:"none"},image:{marginRight:"10px",width:"50px",height:"50px"},menuButton:Object(E.a)({marginRight:t.spacing(2)},t.breakpoints.up("sm"),{display:"none"}),grow:{flexGrow:1},search:Object(E.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(P.b)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(P.b)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{width:"auto"}),searchIcon:{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(E.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),"px)"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("md"),{width:"20ch"})}})),B=a.p+"static/media/ecommerce.fc9ac513.png",M=a(29);var _=function(t){var e=t.cartStock,a=L();return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(T.a,{position:"fixed",className:a.appBar,color:"inherit",children:Object(v.jsxs)(A.a,{children:[Object(v.jsx)(h.a,{component:M.b,to:"/ReactEcommerce",variant:"h6",className:a.title,color:"inherit",children:Object(v.jsx)("img",{src:B,alt:"Commerce.js",height:"25px",className:a.image})}),Object(v.jsx)("div",{className:a.grow}),Object(v.jsxs)("div",{className:a.button,children:[Object(v.jsx)(x.a,{component:M.b,to:"/form","arial-label":"Show cart items",color:"inherit",children:Object(v.jsx)(R.a,{color:"secondary",children:"Vender"})})," ",Object(v.jsx)(x.a,{component:M.b,to:"/cart","arial-label":"Show cart items",color:"inherit",children:Object(v.jsx)(R.a,{badgeContent:e,color:"secondary",children:Object(v.jsx)(I.a,{})})})," "]})]})})})},D=a(167),G=a(166),F=Object(S.a)((function(t){var e;return{title:{margin:"40px 40px 40px 0px"},appBar:{position:"relative"},toolbar:t.mixins.toolbar,layout:Object(E.a)({marginTop:"5%",width:"auto",marginLeft:t.spacing(2),marginRight:t.spacing(2)},t.breakpoints.up(600+2*t.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:(e={marginTop:t.spacing(3),marginBottom:t.spacing(3),padding:t.spacing(2)},Object(E.a)(e,t.breakpoints.down("xs"),{width:"100%",marginTop:60}),Object(E.a)(e,t.breakpoints.up(600+2*t.spacing(3)),{marginTop:t.spacing(6),marginBottom:t.spacing(6),padding:t.spacing(3)}),e),stepper:{padding:t.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:t.spacing(3),marginLeft:t.spacing(1)},divider:{margin:"20px 0"},spinner:{display:"flex",justifyContent:"center",alignItems:"center"},emptyButton:{margin:"20px 20px 20px 0px"},subTotal:{marginTop:"50px"},cartFalse:{marginTop:"10%",marginLeft:"1%",fontSize:"200%"},gpayButton:{}}})),U=Object(S.a)((function(){return{media:{height:260},cardContent:{display:"flex",justifyContent:"space-between"},cartActions:{justifyContent:"space-between"},buttons:{display:"flex",alignItems:"center"},button:{alignItems:"center",marginLeft:"20px"},grid:{display:"grid",gridTemplateColumns:"repeat(2,1fr)",width:"100%",gridGap:"10px"},price:{textAlign:"right",fontSize:"180%"}}}));var z=function(t){var e=t.product,a=t.cart,c=t.setCart,r=t.cartStock,i=t.setCartStock,o=U(),s=Object(n.useState)(e.inCartStock),l=Object(d.a)(s,2),u=l[0],j=l[1];return Object(v.jsxs)(p.a,{children:[Object(v.jsx)(b.a,{className:o.media,image:e.imageUrl}),Object(v.jsx)(m.a,{className:o.cardContent,children:Object(v.jsxs)("div",{className:o.grid,children:[Object(v.jsx)(h.a,{variant:"h4",children:e.title}),Object(v.jsxs)(h.a,{className:o.price,variant:"h5",children:["$",e.price]}),Object(v.jsxs)(h.a,{variant:"h5",children:[" X",u]})]})}),Object(v.jsx)(G.a,{onClick:function(){if(e.inCartStock>1)e.stock++,e.inCartStock--;else{var t=a.filter((function(t){return t._id!==e._id}));c(t),e.stock++,e.inCartStock--}j(e.inCartStock),i(r-1)},className:o.button,variant:"contained",type:"button",color:"secondary",children:"Remover"}),Object(v.jsx)(g.a,{className:o.cardActions})]})},V=a(70),Y=a.n(V),$="",q=function(t){var e=0;return t.forEach((function(t){e+=t.price*t.inCartStock})),$=e.toString(),e};var W=function(t){var e=t.cart,a=t.setCart,n=t.setCartStock,c=t.cartStock,r=F();return e.length>0?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(D.a,{children:[Object(v.jsx)("div",{className:r.toolbar}),Object(v.jsxs)(h.a,{className:r.title,variant:"h4",children:["Tu carrito de compras"," "]}),Object(v.jsx)(u.a,{container:!0,spacing:3,children:e.map((function(t){return Object(v.jsx)(u.a,{item:!0,xs:12,sm:4,children:Object(v.jsx)(z,{product:t,cart:e,setCart:a,setCartStock:n,cartStock:c})},t._id)}))}),Object(v.jsxs)("div",{className:r.cardDetails,children:[Object(v.jsxs)(h.a,{className:r.subTotal,variant:"h4",children:["Subtotal: $",q(e)]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(G.a,{className:r.emptyButton,size:"large",type:"button",variant:"contained",color:"secondary",onClick:function(){e.map((function(t){t.stock+=t.inCartStock,t.inCartStock=0})),a([]),n(0)},children:"Vaciar carrito"}),$?Object(v.jsx)(Y.a,{className:r.gpayButton,environment:"TEST",paymentRequest:{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["MASTERCARD","VISA"]},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"example",gatewayMerchantId:"expampleGatewayMerchantId"}}}],merchantInfo:{merchantId:"12345678901234567890",merchantName:"Demo Merchant"},transactionInfo:{totalPriceStatus:"FINAL",totalPriceLabel:"Total",totalPrice:$,currencyCode:"USD",countryCode:"US"},shippingAddressRequired:!1,callbackIntents:["PAYMENT_AUTHORIZATION"]},onLoadPaymentData:function(t){console.log("exito",t),function(t,e){t.forEach((function(a){var n=a.stock-a.inCartStock+1;f.a.patch("https://shrouded-sierra-86446.herokuapp.com/posts/".concat(a._id),{stock:n});var c=t.filter((function(t){return t._id!==a._id}));e(c),a.inCartStock=0,a.stock=n,console.log(a._id)})),console.log(t)}(e,a)},onPaymentAuthorized:function(t){return console.log("Payment Authorised Success",t),{transactionState:"SUCCESS"}},existingPaymentMethodRequired:"false",buttonColor:"black",buttontType:"Buy"}):console.log()]})]})]})}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(h.a,{variant:"subtitle1",className:r.cartFalse,children:"No tienes ningun producto en tu carrito..."})})},J=Object(S.a)((function(){return{root:{paddingTop:"150px",display:"flex",justifyContent:"center",alignItems:"center"},form:{width:"50%",display:"grid",gridTemplateColumns:"repeat(2,1fr)",rowGap:"100px",columnGap:"20px"},description:{gridColumn:"auto / span 2"},button:{gridColumn:"auto / span 2",width:"98%",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",padding:"0%"},button2:{width:"100%",background:"#fefefe"},alert:{position:"absolute",width:"500px",right:"1rem",top:"85vh",margin:"20px 30px"}}})),H=a(170),X=a(171),Z=a(169),K=a(168);var Q=function(){var t=Object(n.useState)(""),e=Object(d.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)(),i=Object(d.a)(r,2),o=i[0],s=i[1],l=Object(n.useState)(""),u=Object(d.a)(l,2),j=u[0],p=u[1],b=Object(n.useState)(),m=Object(d.a)(b,2),h=m[0],x=m[1],O=Object(n.useState)(""),C=Object(d.a)(O,2),S=C[0],k=C[1],y=Object(n.useState)(""),w=Object(d.a)(y,2),N=w[0],T=w[1],A=Object(n.useState)(""),R=Object(d.a)(A,2),I=R[0],E=R[1],P=Object(n.useState)(""),L=Object(d.a)(P,2),B=L[0],M=L[1],_=Object(n.useState)(!1),D=Object(d.a)(_,2),F=D[0],U=D[1],z=J();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:z.root,children:Object(v.jsxs)("form",{id:"login",className:z.form,noValidate:!0,onSubmit:function(t){t.preventDefault(),f.a.post("https://shrouded-sierra-86446.herokuapp.com/posts",{imageUrl:j,stock:h,title:a,description:S,price:o}).then((function(t){console.log(t),T("success"),E("Exito"),M("La operacion fue un exito !")}),(function(t){console.log(t.response.data.message.message),T("error"),E("ERROR"),M(t.response.data.message.message)})),U(!0),setTimeout((function(){U(!1)}),1e4),c(""),s(0),p(),x(),k("")},children:[" ",Object(v.jsx)(H.a,{id:"titulo",label:"Producto",onChange:function(t){return c(t.target.value)},value:a}),Object(v.jsx)(H.a,{InputProps:{startAdornment:Object(v.jsx)(K.a,{position:"start",children:"$"})},type:"number",id:"precio",label:"Precio",onChange:function(t){return s(t.target.value)},value:o}),Object(v.jsx)(H.a,{id:"img",label:"Url de la imagen (opcional)",onChange:function(t){return p(t.target.value)},value:j}),Object(v.jsx)(H.a,{type:"number",id:"stock",label:"Cantidad de unidades",onChange:function(t){return x(t.target.value)},value:h}),Object(v.jsx)(H.a,{className:z.description,id:"description",label:"Descripcion",multiline:!0,onChange:function(t){return k(t.target.value)},value:S}),Object(v.jsx)(g.a,{className:z.button,children:Object(v.jsx)(G.a,{size:"small",type:"submit",className:z.button2,children:"Submit"})})]})}),F?Object(v.jsxs)("div",{className:z.alert,children:[" ",Object(v.jsxs)(X.a,{severity:N,children:[Object(v.jsx)(Z.a,{children:I}),B]})]}):console.log("asd")]})},tt=a(11),et=Object(S.a)((function(t){return{loading:{transition:"1s",display:"flex",justifyContent:"center",alignItems:"center",height:"97vh",width:"10wh",backgroundColor:t.palette.background.default},loadingText:{fontSize:"500%",fontWeight:"500"}}}));var at=function(){var t=c.a.useState([]),e=Object(d.a)(t,2),a=e[0],r=e[1];function i(){return(i=Object(l.a)(s.a.mark((function t(e){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,k(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){0===a.length&&function(t){i.apply(this,arguments)}("https://shrouded-sierra-86446.herokuapp.com/posts")}),[]);var o=Object(n.useState)([]),u=Object(d.a)(o,2),j=u[0],p=u[1],b=Object(n.useState)(0),m=Object(d.a)(b,2),h=m[0],g=m[1],x=et(),O=c.a.useState(!0),f=Object(d.a)(O,2),C=f[0],S=f[1],k=function(t){r(t),S(!1)};return C?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(M.a,{children:[Object(v.jsx)(_,{products:a,cart:j,cartStock:h}),Object(v.jsx)("main",{className:x.loading,children:Object(v.jsx)("h1",{className:x.loadingText,children:"Loading..."})})]})}):Object(v.jsxs)(M.a,{children:[Object(v.jsx)(_,{products:a,cart:j,cartStock:h}),Object(v.jsxs)(tt.c,{children:[Object(v.jsx)(tt.a,{exact:!0,path:"/cart",children:Object(v.jsx)(W,{cart:j,setCart:p,setCartStock:g,cartStock:h})}),Object(v.jsx)(tt.a,{exact:!0,path:"/ReactEcommerce",children:Object(v.jsx)(N,{setProducts:r,products:a,cart:j,setCart:p,setCartStock:g})}),Object(v.jsx)(tt.a,{exact:!0,path:"/form",children:Object(v.jsx)(Q,{})})]})]})};i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(at,{})}),document.getElementById("root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.3f829314.chunk.js.map